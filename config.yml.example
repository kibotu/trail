database:
  host: ${DB_HOST}
  port: 3306
  name: ${DB_NAME}
  user: ${DB_USER}
  password: ${DB_PASSWORD}
  prefix: trail_
  charset: utf8mb4
  collation: utf8mb4_unicode_ci

docker:
  mysql_root_password: ${DOCKER_MYSQL_ROOT_PASSWORD}
  mysql_port: 3306
  phpmyadmin_port: 8080
  php_port: 8000

ftp:
  host: ftp.example.com
  port: 21
  user: ${FTP_USER}
  password: ${FTP_PASSWORD}
  remote_path: /public_html/trail

google_oauth:
  client_id: ${GOOGLE_CLIENT_ID}
  client_secret: ${GOOGLE_CLIENT_SECRET}

jwt:
  secret: ${JWT_SECRET}  # 256-bit minimum
  expiry_hours: 168  # 7 days

# Iframely API Configuration (for URL preview cards)
iframely:
  api_key: ${IFRAMELY_API_KEY}
  api_url: https://iframe.ly/api/iframely

security:
  rate_limit:
    enabled: true
    requests_per_minute: 120  # Increased for post creation, edit/delete operations
    requests_per_hour: 3000   # Increased for active user sessions
  bot_protection:
    enabled: true
    require_user_agent: true
    block_suspicious_patterns: true

app:
  base_url: https://example.com/trail
  rss_title: "Trail - Link Journal"
  rss_description: "Public link journal feed"
  environment: ${APP_ENV}
  nickname_salt: ${NICKNAME_SALT}  # Random salt for generating nickname hashes

# Notification System Configuration
notifications:
  email_from: "Trail Notifications <notifications@trail.services.kibotu.net>"
  batch_claps_minutes: 60  # Group claps within 60 minutes
  max_emails_per_user_per_hour: 10  # Rate limit for email notifications
  poll_interval_seconds: 30  # Frontend polling interval for notification badge

# Production settings
production:
  admin_email: admin@example.com  # Admin email for system notifications

# Development settings (only used when environment=development)
development:
  # Bypass Google OAuth with these test users
  dev_users:
    - email: dev@example.com
      name: Dev User
      is_admin: true
    - email: admin@example.com
      name: Admin User
      is_admin: true
    - email: user@example.com
      name: Regular User
      is_admin: false
